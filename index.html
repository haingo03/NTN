<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>G·ª≠i C·∫≠u ‚ù§Ô∏è</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Nunito:wght@400;700;800&display=swap" rel="stylesheet">
    <style>
        /* --- 1. C·∫§U H√åNH CHUNG --- */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body {
            margin: 0; padding: 0;
            height: 100vh;
            background: linear-gradient(182deg, #ff9a9e 0%, #fad0c4 99%, #fad0c4 100%);
            font-family: 'Nunito', sans-serif;
            overflow: hidden;
            position: relative;
            user-select: none;
        }

        #main-canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; pointer-events: none; }
        
        /* --- MARQUEE --- */
        .marquee-container {
            position: absolute; top: 20px; width: 100%;
            background: rgba(255, 255, 255, 0.3); backdrop-filter: blur(2px);
            padding: 8px 0; overflow: hidden; z-index: 20;
        }
        .marquee-text {
            white-space: nowrap; display: inline-block;
            color: #d63384; font-family: 'Dancing Script', cursive;
            font-size: 1.4rem; font-weight: bold;
            animation: scroll 15s linear infinite;
        }
        @keyframes scroll { from { transform: translateX(100vw); } to { transform: translateX(-100%); } }

        /* --- SCREENS --- */
        .container {
            position: relative; z-index: 10; width: 100%; height: 100%;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .screen {
            position: absolute; width: 100%; height: 100%;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            opacity: 0; pointer-events: none;
            transform: scale(0.9) translateY(20px);
            transition: all 0.5s ease;
        }
        .screen.active { opacity: 1; pointer-events: auto; transform: scale(1) translateY(0); }

        /* --- UI ELEMENTS --- */
        .gift-box {
            font-size: 6rem; cursor: pointer;
            filter: drop-shadow(0 10px 10px rgba(0,0,0,0.1));
            animation: float 2.5s ease-in-out infinite;
        }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }

        /* Card (Form tr·∫Øng) */
        .card {
            background: rgba(255, 255, 255, 0.9);
            padding: 30px 20px; border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            text-align: center; width: 90%; max-width: 420px;
            position: relative;
            transition: all 0.3s ease;
        }
        .card h1, .card h2 {
            color: #ff4757; font-family: 'Dancing Script', cursive;
            margin-top: 0;
        }
        .card h1 { font-size: 2.5rem; margin-bottom: 25px; }

        /* --- GAME 1 STYLES (TRONG SU·ªêT - GI·ªêNG FILE 1) --- */
        .game-container {
            text-align: center; color: white; width: 100%;
        }
        .score-board {
            font-size: 2rem; font-weight: bold; margin-bottom: 20px;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
            font-family: 'Dancing Script', cursive;
        }
        .click-heart {
            font-size: 8rem; cursor: pointer;
            transition: transform 0.1s;
            filter: drop-shadow(0 5px 15px rgba(255, 71, 87, 0.4));
            user-select: none; -webkit-user-select: none;
        }
        .click-heart:active { transform: scale(0.85); }
        .progress-bar {
            width: 80%; max-width: 300px; height: 20px;
            background: rgba(255,255,255,0.3);
            border-radius: 10px; margin: 20px auto;
            overflow: hidden; border: 2px solid white;
        }
        .progress-fill { height: 100%; width: 0%; background: #ff4757; transition: width 0.2s; }

        /* --- GAME 2 STYLES (FORM TR·∫ÆNG - GI·ªêNG FILE 2) --- */
        .timing-game-area {
            width: 100%; max-width: 350px;
            background: rgba(255,255,255,0.9);
            padding: 20px; border-radius: 20px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        .level-badge {
            background: #e17055; color: white; padding: 5px 15px; 
            border-radius: 15px; font-size: 0.9rem; font-weight: bold; 
            margin-bottom: 10px; display: inline-block;
        }
        .bar-container {
            width: 100%; height: 40px;
            background: #dfe6e9; border-radius: 20px;
            position: relative; margin: 20px 0;
            overflow: hidden; border: 3px solid #636e72;
        }
        .target-zone { position: absolute; top: 0; bottom: 0; background: #ff7675; opacity: 0.8; }
        .moving-cursor { position: absolute; top: -5px; bottom: -5px; width: 4px; background: #d63031; box-shadow: 0 0 10px #d63031; left: 0%; z-index: 10; }
        .game-msg { font-weight: bold; min-height: 1.5rem; margin-bottom: 5px; color: #d63031; }

        /* --- BUTTONS --- */
        .btn-group {
            display: flex; flex-wrap: wrap; justify-content: center; align-items: center; gap: 10px;
        }
        .btn {
            padding: 12px 30px; font-size: 1.1rem; border: none; border-radius: 50px;
            cursor: pointer; font-weight: 800; transition: all 0.2s; outline: none; margin: 5px;
            white-space: nowrap;
        }
        .btn-yes { background: #ff4757; color: white; box-shadow: 0 4px 15px rgba(255, 71, 87, 0.3); }
        .btn-yes:active { transform: scale(0.95); }
        .btn-no { background: #dfe6e9; color: #636e72; transition: transform 0.1s ease; position: relative; }

        /* --- DAYS COUNTER --- */
        .days-wrapper {
            position: relative; width: 180px; height: 180px; margin: 0 auto 10px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .heart-ring {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            border: 2px dashed #ff4757; border-radius: 50%;
            animation: spinRing 10s linear infinite;
        }
        .heart-ring::after {
            content: '‚ù§Ô∏è'; position: absolute; top: -12px; left: 50%;
            transform: translateX(-50%); font-size: 1.5rem; background: white; padding: 0 5px;
        }
        @keyframes spinRing { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .days-number { font-size: 3rem; font-weight: 800; color: #ff4757; line-height: 1; z-index: 2; }

        /* STICKER */
        .sticker-img { position: absolute; width: 80px; z-index: 25; pointer-events: none; }
        .st-1 { top: -60px; left: -30px; transform: rotate(-15deg); }
        .st-2 { top: -70px; right: -25px; transform: rotate(10deg); width: 70px; }
        .st-3 { bottom: -40px; left: -20px; transform: rotate(5deg); width: 75px; }
        .st-4 { bottom: -50px; right: -30px; transform: rotate(-5deg); }

        /* --- TIMELINE --- */
        .timeline-title {
            text-align: center; color: #fff; 
            font-family: 'Dancing Script', cursive; 
            font-size: 3rem; margin-bottom: 20px; 
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        .scroll-wrapper {
            display: flex; overflow-x: auto; scroll-snap-type: x mandatory;
            padding: 20px; gap: 20px; width: 100%;
        }
        .scroll-wrapper::-webkit-scrollbar { display: none; }
        .memory-card {
            flex: 0 0 80%; max-width: 300px; background: white; border-radius: 15px; padding: 15px;
            scroll-snap-align: center; box-shadow: 0 10px 20px rgba(0,0,0,0.15);
            display: flex; flex-direction: column; align-items: center;
        }
        .memory-card img { width: 100%; height: 250px; object-fit: cover; border-radius: 10px; margin-bottom: 10px; }
        
        .memory-title {
            font-family: 'Dancing Script', cursive;
            color: #ff4757; font-size: 1.5rem; margin: 5px 0; font-weight: bold;
        }
        .memory-text { font-size: 0.95rem; color: #555; margin-bottom: 5px; }

        .last-card h2 {
            font-family: 'Dancing Script', cursive;
            font-size: 2.5rem; color: white; margin: 0;
        }

        /* --- POPUP SAD --- */
        #sad-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5);
            z-index: 100; display: none; align-items: center; justify-content: center; backdrop-filter: blur(3px);
        }
        .sad-modal { background: white; padding: 25px; border-radius: 20px; text-align: center; width: 85%; max-width: 300px; }
        .sad-modal img { width: 120px; margin-bottom: 10px; border-radius: 10px; }
    </style>
</head>
<body>

    <canvas id="main-canvas"></canvas>

    <div class="marquee-container">
        <div class="marquee-text">
            Ch√†o ng∆∞·ªùi ƒë·∫πp nh·∫•t th·∫ø gian! ‚ù§Ô∏è Ch√∫c c·∫≠u m·ªôt ng√†y th·∫≠t vui v·∫ª nh√©! ƒê·ª´ng qu√™n c∆∞·ªùi nhi·ªÅu h∆°n nha üåπ Y√™u c·∫≠u 3000!
        </div>
    </div>

    <div class="container">
        <div id="screen-1" class="screen active">
            <div class="gift-box" onclick="nextScreen('screen-2')">üéÅ</div>
            <p style="color: #fff; font-weight: bold; margin-top: 15px;">M·ªü qu√† ƒëi n√†o!</p>
        </div>

        <div id="screen-2" class="screen">
            <div class="card">
                <h1>L√†m ng∆∞·ªùi y√™u t·ªõ nh√©? ‚ù§Ô∏è</h1>
                <div class="btn-group">
                    <button id="btn-yes" class="btn btn-yes" onclick="startGame1()">Okii lun! üòΩ</button>
                    <button id="btn-no" class="btn btn-no" onclick="rejectLove()" onmouseover="moveBtn(this)" ontouchstart="moveBtn(this)">Kh·ªìngg</button>
                </div>
            </div>
        </div>

        <div id="screen-game-1" class="screen">
            <div class="game-container">
                <h2 style="font-family: 'Dancing Script'; font-size: 2.5rem; margin-bottom: 5px; text-shadow: 1px 1px 2px rgba(0,0,0,0.2);">B√© y√™u H·∫£i nhi·ªÅu nh∆∞ th·∫ø n√†o ?</h2>
                <p style="font-size: 0.9rem; margin-top: 0; opacity: 0.9;">Kh√≥ bi·∫øt </p>
                
                <div class="score-board">ƒêi·ªÉm: <span id="score">0</span> / 1000</div>
                
                <div class="click-heart" onclick="clickHeart(event)">‚ù§Ô∏è</div>
                
                <div class="progress-bar">
                    <div id="progress-fill" class="progress-fill"></div>
                </div>
            </div>
        </div>

        <div id="screen-game-2" class="screen">
            <div class="timing-game-area">
                <div class="level-badge" id="level-indicator">Level 1/3</div>
                <h2 style="font-family: 'Dancing Script'; font-size: 2.2rem; color: #ff4757; margin-top: 5px;">B·∫Øt l·∫•y tr√°i tim!</h2>
                <p style="font-size: 0.9rem; color: #555;">B·∫•m n√∫t khi thanh ƒë·ªè ƒëi v√†o v√πng h·ªìng!</p>
                
                <div id="game-msg" class="game-msg"></div>

                <div class="bar-container">
                    <div id="target-zone" class="target-zone"></div>
                    <div id="moving-cursor" class="moving-cursor"></div>
                </div>

                <button class="btn btn-yes" onclick="checkHit()">B·∫ÆT NGAY ‚ù§Ô∏è</button>
            </div>
        </div>

        <div id="screen-days" class="screen">
            <div class="card" style="padding-top: 50px; overflow: visible;">
                <img src="https://scontent.xx.fbcdn.net/v/t39.1997-6/49074053_2170707729814069_7993984291719610368_n.png?_nc_cat=1&ccb=1-7&_nc_sid=ef9b6e&_nc_ohc=ePbTqLpsblwQ7kNvwEAhFcZ&_nc_oc=AdmTt6fTH9Negumdh0jD-FC2DajVsXlUVOiXMKgbhH55cmd9MeC__gpEmP2sHXAZY21nPVhsa1VvQ8UviR8CW4ro&_nc_zt=26&_nc_ht=scontent.xx&_nc_gid=rMC2Jvr35S6I-E5nMYSRUw&oh=00_AfkQuc-NkPi7IPPVXmFmnZyhTjcXSqVuGqVlY3lO3c5J1Q&oe=694B3D85" class="sticker-img st-1">
                <img src="https://scontent.xx.fbcdn.net/v/t39.1997-6/16781536_1458999214131855_5055034120636203008_n.png?_nc_cat=1&ccb=1-7&_nc_sid=ef9b6e&_nc_ohc=r9ljEfD9xeUQ7kNvwHfYzJj&_nc_oc=AdkhIoDBm2LuWCCkkMfGqM7vjHAAi8d-HAvxRm3vSe8fPZUqU1nbWZVLJaNAjR7uRBl9Hx3LNUPaniiYZlFhTpw8&_nc_zt=26&_nc_ht=scontent.xx&_nc_gid=cAsqIse0TuahEkhFmf7SzQ&oh=00_Afl8hunOlyBLTjSv66q8YsJDEZVin7LRJnPPDllfCTjwsQ&oe=694C1F78" class="sticker-img st-2">
                <img src="https://scontent.xx.fbcdn.net/v/t39.1997-6/10935981_698963283549481_711278537_n.png?_nc_cat=1&ccb=1-7&_nc_sid=ef9b6e&_nc_ohc=7rJ3In2nQVgQ7kNvwGBSrQG&_nc_oc=Adka7AzaCOtFxLDdV7CoQC2X8vOHkSTE2y1P00H12LFiOYUhsoLxPxK6V094iWkCHsOP4HkEQIq6vn6TIav13RKN&_nc_zt=26&_nc_ht=scontent.xx&_nc_gid=Ti1bE-LuoUZmLBE_tzyY4Q&oh=00_AfnCLxb1c60HURDHDyHi3nrexeXfcADKxjhXaCOYw_y2Qw&oe=695069F8" class="sticker-img st-3">
                <img src="https://scontent.xx.fbcdn.net/v/t39.1997-6/48891366_2170713239813518_8520200227376857088_n.png?_nc_cat=108&ccb=1-7&_nc_sid=ef9b6e&_nc_ohc=sPpJ9sz3XJoQ7kNvwEn8q6A&_nc_oc=AdkoMPCNbQGt4qDHefy6sjQZ2CakKPfa5F_UTKig17tnkDqrbWRWkz8iYFIRYWmgtIp71jgTHGsrwANKDKmFPgC9&_nc_zt=26&_nc_ht=scontent.xx&_nc_gid=ziY6ih4asymlZVkt5auGiA&oh=00_AfmoEtBwxYDtp-fFtJfGwSPBilNv7CT2dWdztAOwmzy9Yg&oe=69506DE0" class="sticker-img st-4">

                <h2 style="color: #ff4757; font-family: 'Dancing Script'; font-size: 2rem; margin: 0 0 15px 0;">Ch√∫ng m√¨nh ƒë√£ b√™n nhau</h2>
                <div class="days-wrapper">
                    <div class="heart-ring"></div>
                    <div id="days-count" class="days-number">0</div>
                </div>
                <p style="color: #555; margin-bottom: 20px;">Ng√†y h·∫°nh ph√∫c ‚ù§Ô∏è</p>
                <button class="btn btn-yes" onclick="nextScreen('screen-timeline')">Xem k·ª∑ ni·ªám</button>
            </div>
        </div>

        <div id="screen-timeline" class="screen">
            <div style="width: 100%; text-align: center;">
                <h1 class="timeline-title">H√†nh tr√¨nh t√¨nh y√™u</h1>
                <div class="scroll-wrapper">
                    <div class="memory-card">
                        <img src="https://raw.githubusercontent.com/haingo03/NTN/refs/heads/main/images/images1.png" alt="·∫¢nh 1">
                        <div class="memory-title">Ng√†y ƒë·∫ßu ti√™n</div>
                        <p class="memory-text">Nh·ªõ c√°i ng√†y ng√¢y ng√¥ ·∫•y gh√™!</p>
                    </div>
                    <div class="memory-card">
                        <img src="https://raw.githubusercontent.com/haingo03/NTN/refs/heads/main/images/images2.png" alt="·∫¢nh 2">
                        <div class="memory-title">Bu·ªïi h·∫πn h√≤</div>
                        <p class="memory-text">ƒêi ch∆°i vui ∆°i l√† vui n√®.</p>
                    </div>
                    <div class="memory-card">
                        <img src="https://images.unsplash.com/photo-1518199266791-5375a83190b7?auto=format&fit=crop&w=500&q=60" alt="·∫¢nh 3">
                        <div class="memory-title">K·ª∑ ni·ªám...</div>
                        <p class="memory-text">Nh·∫≠p k·ª∑ ni·ªám c·ªßa b·∫°n v√†o ƒë√¢y nh√©.</p>
                    </div>
                     <div class="memory-card">
                        <img src="https://images.unsplash.com/photo-1529333166437-7750a6dd5a70?auto=format&fit=crop&w=500&q=60" alt="·∫¢nh 4">
                        <div class="memory-title">ƒêi du l·ªãch</div>
                        <p class="memory-text">Chuy·∫øn ƒëi ƒë√°ng nh·ªõ nh·∫•t.</p>
                    </div>
                    <div class="memory-card last-card" style="background: #ff4757; color: white; justify-content: center;">
                        <h2>Y√™u C·∫≠u! ‚ù§Ô∏è</h2>
                        <p style="margin-top: 10px; font-size: 1.1rem;">C·∫£m ∆°n v√¨ ƒë√£ ·ªü b√™n t·ªõ.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="sad-overlay">
        <div class="sad-modal">
            <img id="sad-img" src="https://scontent.xx.fbcdn.net/v/t39.1997-6/16684984_1458993974132379_8795383253092532224_n.png?_nc_cat=1&ccb=1-7&_nc_sid=ef9b6e&_nc_ohc=BawVVTCEDiYQ7kNvwHC7f9G&_nc_oc=AdkCxfVLDIio5zep0DjMLyY_wieMsviqgX1YNKz7TZo7ALtn7IelNvsCipatyUnohWgb0JwQh4r-V8yYTc_BdcCM&_nc_zt=26&_nc_ht=scontent.xx&_nc_gid=oo9mdxYRd8ue9UnJBaddlQ&oh=00_AfmmBfYbvuuftxXZtOfG95z_z8nQ4qeTkLj5tZN2SokiDA&oe=694B42F1">
        
            <h3 id="sad-text">ƒê·ª´ng m√†... üò≠</h3>
        
            <button class="btn btn-yes" onclick="closeSad()">Th·ª≠ l·∫°i</button>
        </div>
    </div>

    <script>
        const START_DATE = "2025-10-20"; 

        const canvas = document.getElementById('main-canvas');
        const ctx = canvas.getContext('2d');
        let width, height;

        function resize() { width = canvas.width = window.innerWidth; height = canvas.height = window.innerHeight; }
        window.addEventListener('resize', resize); resize();

        class FloatingHeart {
            constructor() { this.reset(true); }
            reset(init = false) {
                this.x = Math.random() * width;
                this.y = init ? Math.random() * height : height + 20;
                this.size = Math.random() * 15 + 5;
                this.speed = Math.random() * 1.5 + 0.5;
                this.opacity = Math.random() * 0.5 + 0.1;
            }
            update() { this.y -= this.speed; if(this.y < -30) this.reset(); }
            draw() { 
                ctx.fillStyle = `rgba(255, 255, 255, ${this.opacity})`; 
                ctx.font = `${this.size}px Arial`; ctx.fillText('‚ù§Ô∏è', this.x, this.y); 
            }
        }
        const floatHearts = Array.from({length: 40}, () => new FloatingHeart());

        let bigHeartParticles = [];
        let isBigHeartActive = false;

        function getHeartPoint(t) {
            return {
                x: 16 * Math.pow(Math.sin(t), 3),
                y: -(13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t))
            };
        }

        class HeartParticle {
            constructor(t) {
                const pos = getHeartPoint(t);
                this.scale = Math.min(width, height) / 45;
                this.baseX = width / 2 + pos.x * this.scale;
                this.baseY = height / 2 + pos.y * this.scale;
                this.x = this.baseX; this.y = this.baseY;
                this.size = Math.random() * 2 + 1;
                this.color = '#ff4757';
            }
            update() {
                const beat = 1 + Math.sin(Date.now() * 0.006) * 0.05;
                this.x = width/2 + (this.baseX - width/2) * beat;
                this.y = height/2 + (this.baseY - height/2) * beat;
            }
            draw() {
                ctx.fillStyle = this.color; ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2); ctx.fill();
            }
        }

        function initBigHeart() {
            bigHeartParticles = [];
            for(let i=0; i<300; i++) {
                bigHeartParticles.push(new HeartParticle(Math.random() * Math.PI * 2));
            }
            isBigHeartActive = true;
        }

        function animate() {
            ctx.clearRect(0, 0, width, height);
            floatHearts.forEach(h => { h.update(); h.draw(); });
            if(isBigHeartActive) {
                bigHeartParticles.forEach(p => { p.update(); p.draw(); });
            }
            requestAnimationFrame(animate);
        }
        animate();

        /* --- LOGIC C·ªêT L√ïI N√öT KH√îNG (GI·ªêNG FILE 1) --- */
        let countNo = 0;
        function nextScreen(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }
        
        
        /* --- DANH S√ÅCH ·∫¢NH V√Ä C√ÇU N√ìI BU·ªíN --- */
    const sadCollection = [
        {
            img: "https://scontent.xx.fbcdn.net/v/t39.1997-6/16684984_1458993974132379_8795383253092532224_n.png?_nc_cat=1&ccb=1-7&_nc_sid=ef9b6e&_nc_ohc=BawVVTCEDiYQ7kNvwHC7f9G&_nc_oc=AdkCxfVLDIio5zep0DjMLyY_wieMsviqgX1YNKz7TZo7ALtn7IelNvsCipatyUnohWgb0JwQh4r-V8yYTc_BdcCM&_nc_zt=26&_nc_ht=scontent.xx&_nc_gid=oo9mdxYRd8ue9UnJBaddlQ&oh=00_AfmmBfYbvuuftxXZtOfG95z_z8nQ4qeTkLj5tZN2SokiDA&oe=694B42F1",
            text: "H·∫øt y√™u r·ªìii"//m√®o ·ªß r≈©
        },
        {
            img: "https://scontent.xx.fbcdn.net/v/t39.1997-6/193374358_4070787276301793_3027081218150209491_n.jpg?_nc_cat=1&ccb=1-7&_nc_sid=ef9b6e&_nc_ohc=FLz4JzQmteIQ7kNvwF_si-Z&_nc_oc=AdmQMLoQSKKndhWRvgKJhau9krW8y_c9OSbGrl8Jk2pvuND9Ec_OY9XlDFYsDvFmbQ2VdO3BZTzWlPoI7dyUlDE9&_nc_zt=26&_nc_ht=scontent.xx&_nc_gid=iapluzoGBvmC0yJ_sPm2hg&oh=00_AfnPf0kAcM5q4iRDuuaJlGvh9zm8j0DYqAwvsejw3R4BHQ&oe=694F5B20",
            text: "Nhi ch√°n r·ªìi..."//m√®o + box
        },
        {
            img: "https://scontent.xx.fbcdn.net/v/t39.1997-6/69396440_865572503842617_5557573026872033280_n.jpg?_nc_cat=109&ccb=1-7&_nc_sid=ef9b6e&_nc_ohc=t7GYOHvfvkYQ7kNvwEvSqIW&_nc_oc=Adk-hrYTG7TCcemSonrT80__4yWjWHDAO-LW9zWtud0sfMjRMTip3PJS7WKvpmV9icqbGef9PUetvoIC-1tegwFi&_nc_zt=26&_nc_ht=scontent.xx&_nc_gid=RR001k1v4velHjJdP7tGpw&oh=00_AfndTRrhbkyxsvXKcKm-v5A4CS9lNLZGRCFuV7j4rUXwyA&oe=694ED924",
            text: "????"//b·ªçt bi·ªÉn s·ª£ h√£i
        },
        {
            img: "https://scontent.xx.fbcdn.net/v/t39.1997-6/16685015_1458994064132370_3866272707377102848_n.png?_nc_cat=1&ccb=1-7&_nc_sid=ef9b6e&_nc_ohc=-rBC4zKdIs0Q7kNvwG7gKmt&_nc_oc=Adk3gYXNi96w07bjyc8Dez4gWwAVMH6_uCWGd8eArTu7TtcR8HpeMrwFEBZgNFzEZzrqXk9uciSUTDCutnWe80Xr&_nc_zt=26&_nc_ht=scontent.xx&_nc_gid=oJD18ZwJmTGpiVsWJ8ySkg&oh=00_AfnGAsFQKX0ZgGAneUB0GNhxbbSF7tVnxs6jIlyghX3OyA&oe=694CABDC",
            text: "Thi·ªát h·ªü ??!!"//m√®o ƒë√≥ng b·∫±ng
        },
        {
            img: "https://scontent.xx.fbcdn.net/v/t39.1997-6/136547201_254594192670618_4642482078206390366_n.jpg?_nc_cat=1&ccb=1-7&_nc_sid=ef9b6e&_nc_ohc=v-fbbWW7VOoQ7kNvwEvEtEU&_nc_oc=Adkb_j31bhj-aG5venjfRaizb_m1r9rekP-lWVOGiBfUyWbVoTcFbkrGqpR1C3MLGdZ0sHCyNuRp1K2QK3cYGy2_&_nc_zt=26&_nc_ht=scontent.xx&_nc_gid=pIHHXvPEdNYlYH74ee6tAw&oh=00_AfkSQNL0JvszVUcKaxPyLrugotkrje7Nh19H1lxONjEWfg&oe=69508306",
            text: "Ch√°n ng∆∞·ªùi ta r·ªìi..."//b·ªè ƒëi·ªán tho·∫°i
        }
    ];

function rejectLove() {
    countNo++; 
    
    // 1. Ch·ªçn ng·∫´u nhi√™n m·ªôt ki·ªÉu bu·ªìn trong danh s√°ch tr√™n
    const randomIndex = Math.floor(Math.random() * sadCollection.length);
    const selectedSad = sadCollection[randomIndex];

    // 2. Thay ƒë·ªïi ·∫£nh v√† ch·ªØ
    document.getElementById('sad-img').src = selectedSad.img;
    document.getElementById('sad-text').innerText = selectedSad.text;

    // 3. Hi·ªán b·∫£ng l√™n
    document.getElementById('sad-overlay').style.display = 'flex';
}
        
        
        // Logic: N√∫t Kh√¥ng ch·∫°y tr·ªën khi di chu·ªôt v√†o (Ch·ªâ khi b·∫•m sai >= 4 l·∫ßn)
        function moveBtn(btn) {
            if (countNo >= 4) {
                const x = (Math.random() - 0.5) * 300; // TƒÉng kho·∫£ng c√°ch ch·∫°y
                const y = (Math.random() - 0.5) * 300;
                btn.style.transform = `translate(${x}px, ${y}px)`;
            }
        }

        // Logic: ƒê√≥ng popup kh√≥c -> TƒÉng k√≠ch th∆∞·ªõc n√∫t Yes (ƒê√® b·∫πp n√∫t No)
        function closeSad() {
            document.getElementById('sad-overlay').style.display = 'none';
            const btnYes = document.getElementById('btn-yes');
            const btnNo = document.getElementById('btn-no');
            
            // TƒÉng padding v√† font-size cho n√∫t Yes m·ªói l·∫ßn ƒë√≥ng popup
            // ƒê√¢y ch√≠nh l√† logic b·∫°n c·∫ßn: N√∫t Yes to d·∫ßn l√™n
            let currentSize = parseFloat(window.getComputedStyle(btnYes).fontSize);
            let currentPadTop = parseFloat(window.getComputedStyle(btnYes).paddingTop);
            let currentPadRight = parseFloat(window.getComputedStyle(btnYes).paddingRight);

            btnYes.style.fontSize = `${currentSize * 1.8}px`;
            btnYes.style.padding = `${currentPadTop * 1.8}px ${currentPadRight * 1.8}px`;

            // Thay ƒë·ªïi ch·ªØ n√∫t No cho sinh ƒë·ªông
            const noTexts = ["Ch·∫Øc ch∆∞a?", "Th√¥i m√†...", "L√¨ qu√° nha", "ƒê·ª´ng c·ªë ch·∫•p!", "T√¥i b·∫£o em ph·∫£i y√™u t√¥ii"];
            if (countNo <= noTexts.length) {
                btnNo.innerText = noTexts[countNo - 1];
            } else {
                btnNo.innerText = "Huhu üò≠";
            }
            
            // Thay ƒë·ªïi ch·ªØ n√∫t Yes
            const yesTexts = ["Th∆∞∆°ng m√† y√™u ƒëi ‚ù§Ô∏è", "ƒê·ª´ng d·ªói n·ªØa üòò", "Y√äU ƒêI M√Ä!!", "Ph·∫£i y√™u t√¥iiiii"];
            btnYes.innerText = yesTexts[Math.min(countNo, yesTexts.length - 1)];
        }

        /* --- GAME 1 --- */
        let score = 0; 
        const maxScore = 1000; 
        function startGame1() { nextScreen('screen-game-1'); }
        
        function clickHeart(e) {
            const points = Math.floor(Math.random() * 150) + 300; 
            score += points;
            if(score > maxScore) score = maxScore;
            
            document.getElementById('score').innerText = score;
            document.getElementById('progress-fill').style.width = `${(score/maxScore)*100}%`;
            
            createFloatingPoints(e.clientX, e.clientY, points);

            if(score >= maxScore) {
                setTimeout(() => { 
                    alert("Gi·ªèi qu√°! Qua m√†n 2 nh√©!"); 
                    startTimingGame(); 
                }, 300);
            }
        }

        function createFloatingPoints(x, y, val) {
            const el = document.createElement('div');
            el.innerText = `+${val}`; 
            el.style.position = 'fixed'; el.style.left = x + 'px'; el.style.top = y + 'px';
            el.style.color = '#fff'; el.style.fontWeight = 'bold'; el.style.fontSize = '1.5rem';
            el.style.pointerEvents = 'none'; el.style.zIndex = 999;
            el.style.textShadow = '1px 1px 2px rgba(0,0,0,0.5)';
            document.body.appendChild(el);
            el.animate([
                { transform: 'translateY(0)', opacity: 1 },
                { transform: 'translateY(-60px)', opacity: 0 }
            ], { duration: 600 }).onfinish = () => el.remove();
        }

        /* --- GAME 2 --- */
        let gameInterval, cursorPos = 0, direction = 1, isRunning = false;
        let curLevel = 1;
        
        const levels = [
            { speed: 1.5, width: 30, text: "Level 1: D·ªÖ ·ª£t √†!" },
            { speed: 2.0, width: 20, text: "Level 2: Nhanh h∆°n x√≠u!" },
            { speed: 3.0, width: 20, text: "Level 3: Si√™u kh√≥ n√®!" }
        ];

        let targetStart, targetWidth, currentSpeed;

        function startTimingGame() {
            nextScreen('screen-game-2');
            setupLevel(1);
        }

        function setupLevel(lv) {
            curLevel = lv;
            const cfg = levels[lv - 1];
            currentSpeed = cfg.speed; targetWidth = cfg.width;
            
            document.getElementById('level-indicator').innerText = `Level ${lv}/3`;
            document.getElementById('game-msg').innerText = cfg.text;
            document.getElementById('game-msg').style.color = "#d63031";

            targetStart = Math.floor(Math.random() * (90 - targetWidth)) + 5;
            const zone = document.getElementById('target-zone');
            zone.style.left = targetStart + '%';
            zone.style.width = targetWidth + '%';

            cursorPos = 0; isRunning = true;
            if(gameInterval) clearInterval(gameInterval);
            gameInterval = setInterval(() => {
                if(!isRunning) return;
                cursorPos += currentSpeed * direction;
                if(cursorPos >= 100 || cursorPos <= 0) direction *= -1;
                document.getElementById('moving-cursor').style.left = cursorPos + '%';
            }, 20);
        }

        function checkHit() {
            if(!isRunning) return;
            isRunning = false; clearInterval(gameInterval);

            if(cursorPos >= targetStart && cursorPos <= (targetStart + targetWidth)) {
                fireConfetti();
                if(curLevel < 3) {
                    document.getElementById('game-msg').innerText = "ƒê·ªânh ch√≥p! L√™n c·∫•p!";
                    document.getElementById('game-msg').style.color = "green";
                    setTimeout(() => setupLevel(curLevel + 1), 1000);
                } else {
                    document.getElementById('game-msg').innerText = "CHI·∫æN TH·∫ÆNG!!! ‚ù§Ô∏è";
                    setTimeout(finishAll, 1000);
                }
            } else {
                document.getElementById('game-msg').innerText = "H·ª•t r√πi! L·∫°i nha!";
                setTimeout(() => setupLevel(curLevel), 1000);
            }
        }

        function finishAll() {
            nextScreen('screen-days');
            initBigHeart(); 
            fireConfetti();
            calculateDays(); 
        }

        function calculateDays() {
            const start = new Date(START_DATE);
            const now = new Date();
            const days = Math.floor((now - start) / 86400000);
            
            const el = document.getElementById('days-count');
            let count = 0;
            const step = Math.max(1, Math.floor(days / 50));
            
            const timer = setInterval(() => {
                count += step;
                if(count >= days) {
                    count = days;
                    clearInterval(timer);
                }
                el.innerText = count;
            }, 30);
        }

        function fireConfetti() {
            const colors = ['#ff7675', '#74b9ff', '#55efc4', '#ffeaa7', '#e84393'];
            for(let i=0; i<100; i++) {
                const el = document.createElement('div');
                el.style.position='fixed'; el.style.left='50%'; el.style.top='50%';
                el.style.width='8px'; el.style.height='8px';
                el.style.background = colors[Math.floor(Math.random()*5)];
                el.style.borderRadius='50%'; el.style.zIndex='999';
                document.body.appendChild(el);
                const a = Math.random()*6.28, v = Math.random()*300+100;
                el.animate([
                    {transform:'translate(0,0)', opacity:1},
                    {transform:`translate(${Math.cos(a)*v}px, ${Math.sin(a)*v}px)`, opacity:0}
                ], {duration: 1000}).onfinish=()=>el.remove();
            }
        }
    </script>
</body>
</html>
